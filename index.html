<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Random Thirukural with Meaning</title>
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="pragma" content="no-cache">
  <meta http-equiv="expires" content="-1">
  <link rel="icon" href="kural.gif" type="image/gif">

  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #f7f7f7;
      margin: 0;
      padding: 0;
      color: #333;
      text-align: center;
    }

    h1 {
      color: #4CAF50;
      font-size: 2.5rem;
      margin: 30px 0;
    }

    .content {
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
      background-color: #fff;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      border-radius: 8px;
      text-align: center;
    }

    .image-container {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      margin-bottom: 20px;
    }

    .image-container img {
      width: 100%;
      max-width: 600px;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    }

    .loading {
      display: none;
      margin-bottom: 20px;
      text-align: center;
    }

    /* CSS-based marquee for scrolling text */
    .marquee-container {
      width: 100%;
      overflow: hidden;
      white-space: nowrap;
      margin: 20px 0;
      position: relative;
    }

    .marquee-text {
      display: inline-block;
      font-size: 1.5rem;
      color: #4CAF50;
      font-weight: bold;
      animation: scroll 10s linear infinite;
    }

    @keyframes scroll {
      0% {
        transform: translateX(100%);
      }
      100% {
        transform: translateX(-100%);
      }
    }

    /* SVG Spinner Styling */
    .spinner {
      animation: spin 1s infinite linear;
      width: 50px;
      height: 50px;
      margin-top: 10px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .btn {
      background-color: #4CAF50;
      color: white;
      padding: 15px 30px;
      font-size: 1.2rem;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      margin-top: 20px;
    }

    .btn:hover {
      background-color: #45a049;
    }

    .social-media, .donation-form {
      margin-top: 20px;
    }

    iframe {
      width: 100%;
      max-width: 450px;
      height: 80px;
      border: none;
      margin-top: 20px;
    }

    .donation-form input[type="image"] {
      border: none;
    }
  </style>

  <script type="text/javascript">
    // Fetch the Kural and Meaning (from Google Apps Script)
    function fetchKural() {
      const appid = 'AKfycbx44XXq0KQvmtoAy8Q3SPzwBa7u5sqqLA5eN6FgKooki_2m2Yo0Xav0s-KatkQbaElK';
      const url = `https://script.google.com/macros/s/${appid}/exec?mx=1`;

      // Show loading message and spinner
      document.getElementById("loading").style.display = "block";
      document.getElementById("k_img").style.display = "none";
      document.getElementById("meaning_img").style.display = "none";

      fetch(url)
        .then(response => response.json())
        .then(data => {
          const kuralImageUrl = `data:${data.mimeType};base64,${data.k1}`;
          const meaningImageUrl = `data:${data.mimeType};base64,${data.p3}`;

          // Set both the Kural and meaning images
          document.getElementById("k_img").src = kuralImageUrl;
          document.getElementById("meaning_img").src = meaningImageUrl;

          // Hide loading GIF and show images
          document.getElementById("loading").style.display = "none";
          document.getElementById("k_img").style.display = "block";
          document.getElementById("meaning_img").style.display = "block";
        })
        .catch(error => {
          console.error('Error fetching Kural:', error);
          document.getElementById("loading").style.display = "none";
        });
    }

    window.onload = function() {
      fetchKural();
    };
  </script>
</head>

<body>
  <div class="content">
    <h1>Random Thirukural</h1>

    <!-- Loading Indicator -->
    <div id="loading" class="loading">
      <!-- CSS-based Marquee Text -->
      <div class="marquee-container">
        <span class="marquee-text">A random Kural is being generated...</span>
      </div>
      
      <!-- SVG Spinner -->
      <svg class="spinner" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="50" height="50">
        <circle cx="25" cy="25" r="20" stroke="#4CAF50" stroke-width="5" fill="none" />
      </svg>
    </div>

    <!-- Combined Image Container -->
    <div class="image-container">
      <img id="k_img" alt="Thirukural Image" style="display:none;" />
      <img id="meaning_img" alt="Meaning Image" style="display:none;" />
    </div>

    <!-- New Kural Button -->
    <button class="btn" onclick="fetchKural()">New Kural</button>

    <!-- Social Media Section (Facebook Like Button) -->
    <div class="social-media">
      <iframe src="http://www.facebook.com/plugins/like.php?href=http://apps.facebook.com/randomkural" scrolling="no" frameborder="0"></iframe>
    </div>

    <!-- PayPal Donation Form -->
    <div class="donation-form">
      <!-- pay pal information : begin -->
      <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
      <input type="hidden" name="cmd" value="_s-xclick">
      <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----
      ">
      <input type="image" src="https://www.paypal.com/en_US/i/btn/btn_donateCC_LG_global.gif" border="0" name="submit" alt="">
      <img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1">
      </form>
      <!-- pay pal information : end   -->
    </div>
  </div>
</body>
</html>
